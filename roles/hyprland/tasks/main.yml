- name: "pacman -Syu as a separate step"
  become: true
  pacman:
    update_cache: yes
    upgrade: yes

- name: install hyprland packages 
  become: true
  package:
    name: "{{ item }}"
    state: present
  loop: "{{ lookup('file', 'files/packages.txt').splitlines() }}"

- name: copy hyprland conf
  copy:
    src: files/hyprland.conf
    dest: "{{ home_dir}}/.config/hypr/hyprland.conf"
    owner: andreas
    group: andreas
    backup: yes

- name: copy vol.sh
  copy:
    src: files/vol.sh
    dest: "{{ home_dir}}/.config/hypr/sh/"
    owner: andreas   
    group: andreas

- name: copy toggle_waybar
  copy:
    src: files/toggle_waybar.sh
    dest: "{{ home_dir}}/.config/hypr/sh/"
    owner: andreas   
    group: andreas   

- name: copy set wallpaper
  copy:
    src: files/set-wallpaper.sh
    dest: "{{ home_dir}}/.config/hypr/sh/"
    owner: andreas   
    group: andreas   

- name: copy wallpapers
  copy:
    src: files/backgrounds
    dest: "{{ home_dir}}/.config/"
    owner: andreas   
    group: andreas   

- name: confure mako
  copy:
    src: files/conf
    dest: "{{ home_dir}}/.config/mako/"
    owner: andreas
    group: andreas

- name: Run mako as service
  systemd:
    state: started
    name: mako
    scope: user
    no_block: true

